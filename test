import tkinter as tk
from tkinter import ttk, messagebox
import sqlite3
conn = sqlite3.connect("books.db")
cursor = conn.cursor()

# Create table if not exists
cursor.execute("""
CREATE TABLE IF NOT EXISTS books (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    title TEXT NOT NULL,
    author TEXT NOT NULL
)
""")
conn.commit()



def add_book_to_db():
    title = title_entry.get()
    author = author_entry.get()
    if title and author:
        cursor.execute("INSERT INTO books (title, author) VALUES (?, ?)", (title, author))
        conn.commit()
        load_books_to_treeview()
    else:
        messagebox.showwarning("Warning", "Enter title and author")


def load_books_to_treeview():
    for row in tree.get_children():
        tree.delete(row)

    cursor.execute("SELECT * FROM books")
    for row in cursor.fetchall():
        tree.insert("", tk.END, values=row)



root = tk.Tk()
root.title("Book Store")

tk.Label(root, text="Title").grid(row=0, column=0)
title_entry = tk.Entry(root)
title_entry.grid(row=0, column=1)

tk.Label(root, text="Author").grid(row=1, column=0)
author_entry = tk.Entry(root)
author_entry.grid(row=1, column=1)

tk.Button(root, text="Add Book", command=add_book_to_db).grid(row=2, column=0, columnspan=2, pady=5)

tree = ttk.Treeview(root, columns=("ID", "Title", "Author"), show="headings")
tree.heading("ID", text="ID")
tree.heading("Title", text="Title")
tree.heading("Author", text="Author")
tree.grid(row=3, column=0, columnspan=2, pady=10)

# First time load
load_books_to_treeview()

root.mainloop()
